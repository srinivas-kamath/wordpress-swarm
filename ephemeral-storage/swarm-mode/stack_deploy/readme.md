For the Compose file to run as a stack; we will need to make some configurations prior to running the "stack deploy" command like creating secrets and clearing out the trail of the procedure in this scenario :-

The Best place to test this out ---> https://labs.play-with-docker.com/

First, download this repo :-

        $ mkdir /docker && cd /docker/ && git clone https://github.com/srinivas-kamath/wordpress-swarm.git

Next; we need to initialize swarm mode as "secrets" is a swarm-mode only feature so :-

        $ sudo docker swarm init --advertise-addr <Public_IP-Address>

Next, we need to create secrets :-

        $ echo "<root-user_password>" | sudo docker secret create mysql_root_password -
        # e.g. :- echo "GjDMdp9rjfVIhfReeO6jIREZDtJLxMqn" | sudo docker secret create mysql_root_password -

        $ echo "<database-name>" | sudo docker secret create mysql_database -
        # e.g. :- echo "wordpress" | sudo docker secret create mysql_database -

        $ echo "<admin-username>" | sudo docker secret create mysql_user -
        # e.g. :- echo "wordpress-user" | sudo docker secret create mysql_user -

        $ echo "<admin-user_password>" | sudo docker secret create mysql_password -
        # e.g. :- echo "NMR4tOBWpoj5VQPnzMdTPIVLZmJl10lo" | sudo docker secret create mysql_password -

        $ echo "<mysql_container_hostname>" | sudo docker secret create wordpress_db_host -
        # e.g. :- echo "wordpress_mysql" | sudo docker secret create wordpress_db_host -

NOTE :- The Database passwords shared above in "e.g. :-" commands are for reference only;
        the reader following the steps needs to create random strong passwords of their own and replace them with the passwords specified in the "e.g. :-" commands to make their container setup as secure as possible.

Once, these commands are executed; our required secrets for the wordpress-swarm are ready but, if you fire "history" command in the console; you will be able to see what are the contents of your secrets :-

        $ history

        echo "GjDMdp9rjfVIhfReeO6jIREZDtJLxMqn" | sudo docker secret create mysql_root_password -
        echo "wordpress" | sudo docker secret create mysql_database -
        echo "wordpress-user" | sudo docker secret create mysql_user -
        echo "NMR4tOBWpoj5VQPnzMdTPIVLZmJl10lo" | sudo docker secret create mysql_password -
        echo "wordpress_mysql" | sudo docker secret create wordpress_db_host -

Now, this is a loop-hole as in-case anybody accesses your node from where these commands were fired; and runs a simple "history" command; all your secrets are then exposed and this needs to be cleaned before moving further.

So, we now clean the history of the node :-

        $ history -c && history -w

Once this is done; just enter the "history" command and double check that your secrets are no more visible in the output.

Next, you can add the nodes to this swarm now and then deploy the compose-file in swarm mode.

        $ sudo docker swarm join --token <random-autogenerated-string> <manager-node_Public-IP-Address>:2377
        $ cd /docker/wordpress-swarm/ephemeral-storage/swarm-mode/stack_deploy/
        $ sudo docker stack deploy --compose-file docker-compose.yml swarm

Once the containers are up and running check your wordpress setup by randomly choosing any Node from the one's in the swarm cluster and hit on their public-IP's 80-port which; "wordpress_nginx" container should accept and proxy the request to "wordpress_php" container and greet you with a wordpress-initial setup page.

On the wordpress-initial setup page; add the database name, username, password and database hostname for initial-setup as specified in the environment variable for "wordpress_mysql" and "wordpress_php" container and the wordpress installation should complete successfully and you should be able to see the default wordpress page on hitting the host-ip.
